(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9878],{59731:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/registro-de-notas",function(){return t(69420)}])},84555:function(e,n,t){"use strict";var r=t(85893),o=t(94184),a=t.n(o),i=t(72169),s=t.n(i),l=t(95821),c=s(),u=function(e){var n=e.children,t=e.type,o=e.classname,i=e.variant,u=e.size,d=e.disabled,f=e.onclick,p=e.name,h="btn-".concat(void 0===i?"btn-default":i),g=a()("btn",h,(0,l.IO)(s(),void 0===o?"":o),c[void 0===u?"medium":u]);return(0,r.jsx)("button",{name:p,type:void 0===t?"button":t,className:g,onClick:f,disabled:void 0!==d&&d,children:void 0===n?"Guardar":n})};n.Z=u},57870:function(e,n,t){"use strict";var r=t(85893),o=t(94184),a=t.n(o),i=t(15605),s=t.n(i)(),l=function(e){var n=e.classname,t=void 0===n?"":n,o=e.children,i=e.idFor,l=a()(s[t]?s[t]:t);return(0,r.jsx)("label",{htmlFor:i,className:l,children:void 0===o?"label text":o})};n.Z=l},34365:function(e,n,t){"use strict";t.d(n,{X0:function(){return x}});var r,o,a,i,s,l=t(34727),c=t(70655),u=t(42222),d=t(11163),f=t.n(d),p=t(69706),h=t(89e3),g=t(98521),m=(r=(0,l.Z)(function(e){var n,t,r,o,a,i,s,l,d;return(0,c.__generator)(this,function(c){switch(c.label){case 0:if(n=(0,u.get)(p.FD),!(void 0===(t=(0,u.get)(p.K6))||null===t))return[3,2];return[4,g.Vu.DatosUsuario(n)];case 1:if(o=c.sent(),void 0===(0,p.nt)(o,e))return[2];t=null===(r=o[0])||void 0===r?void 0:r.userName,c.label=2;case 2:return a=(0,u.get)(p.tp),i=window.location,s={codeUser:t,codeApp:p.dU,pageName:i.pathname.replace("/","")},[4,g.Ex.ByPA_AU_User(s)];case 3:if(l=c.sent(),void 0===(0,p.nt)(l,e))return[2];if(!(l.length<=0))return[3,5];return[4,(0,h.Z)({title:p._z,text:p.fR,confirmButtonText:"Ok"})];case 4:if(c.sent())return window.location.href="".concat("https://identidaddes.upn.edu.pe/api/Usuario/SignInSaml2?appcode=DOCEN&redirect=").concat("http://localhost:450/default"),[2,!0];c.label=5;case 5:if(null!=a)return[3,7];return[4,_(l,e)];case 6:c.sent(),c.label=7;case 7:return"permisos"!==s.pageName&&b(s,e),[2,!1]}})}),function(e){return r.apply(this,arguments)}),_=(o=(0,l.Z)(function(e,n){var t,r,o,a;return(0,c.__generator)(this,function(i){switch(i.label){case 0:t=[],r=0,i.label=1;case 1:if(!(r<e.length))return[3,4];return o=e[r].groupName,[4,g.Ex.ByPA_AU_Group(o)];case 2:if(a=i.sent(),void 0===(0,p.nt)(a,n))return[2];void 0!==a[0]&&t.push(a[0]),i.label=3;case 3:return r++,[3,1];case 4:return(0,u.set)(p.tp,t),[2]}})}),function(e,n){return o.apply(this,arguments)}),b=(a=(0,l.Z)(function(e,n){var t,r;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return[4,g.Ex.ByPA_AU_App(e)];case 1:if(t=r.sent(),void 0===(0,p.nt)(t,n))return[2];if("0"!==t[0].groupId)return[3,3];return n(!1),[4,(0,h.Z)({title:p._z,text:p.Nl,confirmButtonText:"Ok"})];case 2:if(r.sent())return window.location.href="".concat("http://localhost:450/permisos"),[2,!0];return[2,!1];case 3:return[2]}})}),function(e,n){return a.apply(this,arguments)}),v=(i=(0,l.Z)(function(e){var n,t,r,o,a;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return t={token:(0,u.get)(p.o3),userCode:(0,u.get)(p.FD),classCode:(0,u.get)(p.FD)},[4,g.Ex.ByTokenValidate(t)];case 1:if((null==(r=n.sent())?void 0:r.tokenId)!==void 0)return[3,4];if((0,u.remove)(p.o3),(0,u.remove)(p.FD),(0,u.remove)(p._0),!(null===(o=(0,u.get)(p.FD))||void 0===o||""===o))return[3,3];return e(!1),localStorage.clear(),[4,(0,h.Z)({title:p._z,text:p.pD,confirmButtonText:"Ok"})];case 2:if(n.sent())return window.location.href="".concat("https://identidaddes.upn.edu.pe/api/Usuario/SignInSaml2?appcode=DOCEN&redirect=").concat("http://localhost:450/default"),[2,!0];n.label=3;case 3:return[3,5];case 4:return[2,!1];case 5:return[2]}})}),function(e){return i.apply(this,arguments)}),x=(s=(0,l.Z)(function(e,n){var t,r;return(0,c.__generator)(this,function(o){switch(o.label){case 0:return n(!0),[4,v(n)];case 1:return t=o.sent(),[4,m(n)];case 2:return r=o.sent(),console.log("rs0",r),n(!1),""===e||t||f().push(e),[2,t]}})}),function(e,n){return s.apply(this,arguments)})},69420:function(e,n,t){"use strict";t.r(n);var r=t(34727),o=t(14251),a=t(52875),i=t(70655),s=t(85893),l=t(67294),c=t(84555),u=t(57870),d=t(4407),f=t.n(d),p=t(5152),h=t.n(p),g=t(27201),m=t(89e3),_=t(42222),b=t(98521),v=t(69706),x=t(34365),N=h()(function(){return Promise.all([t.e(4885),t.e(1427),t.e(8072),t.e(4146)]).then(t.bind(t,14146))},{loadableGenerated:{webpack:function(){return[14146]}},ssr:!1}),C=h()(function(){return Promise.all([t.e(8620),t.e(223)]).then(t.bind(t,50223))},{loadableGenerated:{webpack:function(){return[50223]}},ssr:!1}),w=[{label:"Seleccionar",field:"Seleccionar",sort:"asc"},{label:"Semestre",field:"SemCodigo",sort:"asc"},{label:"Sede",field:"SedCodigo",sort:"asc"},{label:"Clase",field:"ClaCodigo",sort:"asc"},{label:"Tipo doc.",field:"TipoDoc",sort:"asc"},{label:"C\xf3d. curso",field:"CurCodigo",sort:"asc"},{label:"Nombre del curso",field:"CurNombre",sort:"asc"},{label:"Carrera",field:"CarNombre",sort:"asc"},{label:"Tipo Clase",field:"ClaTipo",sort:"asc"},],j=function(){var e,n=(0,l.useState)(!0),t=n[0],d=n[1],p=(0,l.useState)([]),h=p[0],j=p[1],y=(0,_.get)(v.EG),k="".concat((0,v.rB)(new Date)," ").concat((0,v.BL)(new Date));(0,l.useEffect)(function(){(0,_.remove)(v.xv),(null==y?void 0:y.code)!==void 0&&F(null==y?void 0:y.code)},[]);var T,B,F=(e=(0,r.Z)(function(e){var n,t;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,b.Wp.listCoursesByTeacher(e)];case 1:if(t=n.sent().map(function(e){return(0,a.Z)((0,o.Z)({},e),{Seleccionar:E(e)})}),void 0===(0,v.nt)(t,d))return[2];if(t.length<=0)return d(!1),[2,(0,m.Z)({title:v._z,text:"No tiene Registros",confirmButtonText:"Ok"})];return(0,_.set)(v.sM,t[0].SemCodigo),j(t),d(!1),[2]}})}),function(n){return e.apply(this,arguments)}),E=function(e){return(0,s.jsx)(c.Z,{type:"button",onclick:function(){return I(e)},classname:"text-decoration-none text-warning",children:"Seleccionar"})},I=(T=(0,r.Z)(function(e){return(0,i.__generator)(this,function(n){return(0,_.set)(v.xv,e),(0,x.X0)("./registro-de-notas/ingresoNotas",d),[2]})}),function(e){return T.apply(this,arguments)}),S=(B=(0,r.Z)(function(){var e,n,t,r,o,a,s,l,c,u,f,p;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return n=(0,_.get)(v.sM),d(!0),t={userCode:null==y?void 0:y.code,Periodo:n,userName:null==y?void 0:y.userName,fechaHora:k,state:!0},[4,Z(t)];case 1:return r=i.sent(),console.log("ByTokenAutentica",r),o={userCode:null==y?void 0:y.code,semesterCode:n,token:null==r?void 0:null===(e=r.setupInfo)||void 0===e?void 0:e.ManualEntryKey,fechaHora:k},[4,b.Ex.ByTokenlogPut(o)];case 2:return a=i.sent(),console.log("ByTokenlog",a),[4,b.Ex.ByTokenInsertState(o)];case 3:return s=i.sent(),console.log("ByTokenlog",s),[4,b.JO.notesEmail(y.code)];case 4:if(l=i.sent(),console.log("notesEmail",l.emailUPN),l.emailUPN.includes("@upn.pe")||l.emailUPN.includes("@upn.edu.pe"))return f="<center><p><img src=' ".concat(null==r?void 0:null===(c=r.setupInfo)||void 0===c?void 0:c.QrCodeSetupImageUrl,"'></p> ").concat(null==r?void 0:null===(u=r.setupInfo)||void 0===u?void 0:u.ManualEntryKey,"</center>"),p={EmailList:[l.emailUPN],DisplayName:"UPN Docentes",Subject:"Generaci\xf3n de Token para cambio de Notas!",IsHtml:!0,ReplyToList:[l.emailUPN],AttachmentB64:null,AttachmentName:null,NotificationType:1,EmailListCC:null,EmailListBCC:null,Queue:!0,Body:P(f)},b.az.email(p),d(!1),[2,(0,m.Z)({title:v._z,text:(0,v.z4)(l.emailUPN),confirmButtonText:"Ok"})];return d(!1),[2,(0,m.Z)({title:v._z,text:v.FB,confirmButtonText:"Ok"})]}})}),function(){return B.apply(this,arguments)}),Z=function(e){return b.Ex.ByTokenAutentica(e)},P=function(e){return"<table width='600' border='1' align='center' cellpadding='0' cellspacing='0' bordercolor='#FFFFFF' bgcolor='#FFFFFF'>\n     <tr>\n     <td valign='top'><table width='600' border='0' align='center' cellpadding='0' cellspacing='0' bgcolor='#FFFFFF'>\n     <tr>\n     <td height='100'><img style='padding-left:25px' width='200' height='68' src='https://upn-repositorio-public.s3.amazonaws.com/logos/png/logo-upn-sin-fondo.png' /></td>\n     </tr>\n     <tr>\n     <td valign='top'><table width='100%' border='0' cellpadding='20'>\n     <tr><td>\n     <b>Creaci\xf3n de TOKEN - Ingreso de Notas Portal Docentes</b><br/><br/>\n     Estimado Docente<br/>\n     Se cre\xf3 correctamente su Token para el ingreso de Notas en el Portal Docente. Por favor escanear el codigo QR para enlazar su dispositivo movil desde la aplicaci\xf3n Google Authenticathor o Microsoft Authenticathor.<br/><br/>\n     ".concat(e,"\n     <br/>\n     <br/><br/>\n     <span style='color: #B7B7B7;'>Este correo es informativo, favor no responder a esta direcci\xf3n de correo, ya que no se encuentra habilitada para recibir mensajes.</span>\n     </td></tr>\n     </table></td>\n     </tr>\n     </table></td>\n     </tr>\n     </table>")};return(0,s.jsxs)("div",{className:f().contenido,children:[(0,s.jsx)(g.Z,{loading:t}),(0,s.jsxs)("div",{className:f().content,children:[(0,s.jsx)("div",{className:f().titulo,children:(0,s.jsx)(u.Z,{classname:"text-warning h5 mt-3 mb-3",children:"Ingreso de Notas"})}),(0,s.jsx)("hr",{}),(0,s.jsx)("div",{className:f().alertaContent,children:(0,s.jsx)(C,{classname:"w-100",variant:"info",children:(0,s.jsxs)("p",{className:"mb-0",children:[(0,s.jsx)("b",{children:"Nota:"}),(0,s.jsx)("br",{}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["Al inicio de cada periodo/semestre usted debe vincular su dispositivo m\xf3vil con un ",(0,s.jsx)("b",{children:"nuevo"})," c\xf3digo QR."]}),(0,s.jsx)("li",{children:"Todos los c\xf3digos QR generados en periodos anteriores se invalidan autom\xe1ticamente."}),(0,s.jsxs)("li",{children:["Cada vez que haga click en Generar Token, usted deber\xe1 vincular ",(0,s.jsx)("b",{children:"nuevamente"})," su dispositivo m\xf3vil con el"," ",(0,s.jsx)("b",{children:"nuevo"})," c\xf3digo QR."]}),(0,s.jsx)("li",{children:"Cada vez que genera un c\xf3digo QR, este es enviado a su correo electr\xf3nico."})]})]})})}),(0,s.jsx)("div",{className:f().rowButtons,children:(0,s.jsx)(c.Z,{type:"button",variant:"primary",onclick:S,children:"Generar Token Semestre"})}),(0,s.jsx)("hr",{}),(0,s.jsx)("div",{className:f().tabla,children:(0,s.jsx)(N,{columns:w,listData:h})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("small",{children:[(0,s.jsx)("strong",{children:"Tipo docente: (P)"})," Principal / ",(0,s.jsx)("strong",{children:"(S)"})," ","Sustituto / ",(0,s.jsx)("strong",{children:"(A)"})," Auxiliar"]}),(0,s.jsx)("br",{}),(0,s.jsxs)("small",{children:[(0,s.jsx)("strong",{children:"Tipo Clase: (PR)"})," Presencial / ",(0,s.jsx)("strong",{children:"(VT)"})," ","Virtual"]})]})]})]})};n.default=j},72169:function(e){e.exports={small:"button_small__7bbNh",medium:"button_medium__a2eos",large:"button_large__A_BJ0",primary:"button_primary__2xniq",secondary:"button_secondary__3F83R"}},15605:function(){},4407:function(e){e.exports={header:"IngresoNotas_header__HE3Vp",content:"IngresoNotas_content__TsjCn",title:"IngresoNotas_title__KKiCF",headerContent:"IngresoNotas_headerContent__d3kxk",navbr:"IngresoNotas_navbr__CZwBS",contenido:"IngresoNotas_contenido__xGeGd",titulo:"IngresoNotas_titulo__UtAnd",alertaContent:"IngresoNotas_alertaContent__7ul6s",rowButtons:"IngresoNotas_rowButtons__wwacx",tabla:"IngresoNotas_tabla__FXUcr","bg-warning":"IngresoNotas_bg-warning__B_STI",footer:"IngresoNotas_footer__ZROcf",contentFooter:"IngresoNotas_contentFooter__2QAx9"}},11163:function(e,n,t){e.exports=t(90387)}},function(e){e.O(0,[6006,9774,2888,179],function(){return e(e.s=59731)}),_N_E=e.O()}]);